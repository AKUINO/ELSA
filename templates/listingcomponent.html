$def with (mail,id,type)
$code:
    allobjects = c.findAllFromType(type)
    elem = allobjects.elements[id]
    keyID = c.findAllFromObject(elem).keyColumn
    
$var lang : $c.connectedUsers.users[mail].cuser.fields['language']
$var location: $(elem.get_name_listing())/

<div class="row active" style="color:#f07e26;background-color:#E5E5E7;margin-top:10px;margin-bottom:10px;padding:15px;">
    <div class="col-xs-12" >
	<div class="col-xs-1" >
	$if 'deny' in elem.fields :
	    $if elem.fields['deny'] == '0' or  elem.fields['deny'] == 0 :
		<span class="glyphicon glyphicon-remove-circle"> </span>
	    $else:
		<span class="glyphicon glyphicon-ok-circle"> </span>
	</div>
	<div class="col-xs-4" >
	    $elem.fields['acronym']
	</div>
	<div class="col-xs-7">
	    <strong>$elem.getName(self.lang)</strong>
	</div>
    </div>
    <div class="col-xs-12" id="listing">
	<div class="col-xs-2" >
	    <strong><a href="/manualdata/$(type)_$(id)" class="btn btn-warning" role="button"><span class="$c.AllHalflings.elements['measure'].getHalfling()"></span></a></strong>
	</div>

	<div class="col-xs-2" >
	    <strong><a href="#" class="btn btn-success" role="button"><span class="$c.AllHalflings.elements['listing'].getHalfling()"></span></a></strong>
	</div>
	
	$if type == 'p':
	    <div class="col-xs-2" >
		<strong><a href="/places/graphics/$id" class="btn btn-warning" role="button"><span class="$c.AllHalflings.elements['graphic'].getHalfling()"></span></a></strong>
	    </div>
	$elif type == 'e':
	    <div class="col-xs-2" >
		<strong><a href="/equipments/graphics/$id" class="btn btn-warning" role="button"><span class="$c.AllHalflings.elements['graphic'].getHalfling()"></span></a></strong>
	    </div>
	$elif type == 'c':
	    <div class="col-xs-2" >
		<strong><a href="/containers/graphics/$id" class="btn btn-warning" role="button"><span class="$c.AllHalflings.elements['graphic'].getHalfling()"></span></a></strong>
	    </div>
	$else:
	    <div class="col-xs-2" >
	    </div>
	<div class="col-xs-2">
	    <strong><a href="/$(elem.get_name_listing())/$(elem.fields[keyID])" class="btn btn-warning" role="button"><span class="glyphicon glyphicon-edit"></span></a></strong>
	</div>
	<div class="col-xs-2">
	    <strong><a href="/permissions/$(type)_$elem.fields[keyID]" class="btn btn-warning" role="button"><span class="halflings halflings-group"></span></a></strong>
	</div>
	<div class="col-xs-2">
		<button type="button" class="btn btn-warning btn-md" data-toggle="modal" data-target="#modal"><span class="$c.AllHalflings.elements['info'].getHalfling()"></span></button>
	</div>
    </div>
</div>

$code:
    groupList = c.hierarchyString() 
<div class="modal fade" id="modal" role="dialog">
	<div class="modal-dialog">
	    <!-- Modal content-->
	    <div class="modal-content">
		<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal">&times;</button>
		<h4 class="modal-title">$elem.getName(self.lang)</h4>
	    </div>
	    <div class="modal-body">
		<div class="container-fluid">
		    <div class="row">
			<div class="col-xs-3">
			    <img src="/$(elem.getImageDirectory())jpg" alt="Image not found" style="width:128px;height:128px;">
			</div>
			<div id="modalinfo" class="col-xs-6">
			    <span class="glyphicon glyphicon-flag"><strong>   $elem.fields['acronym']</span></strong>
			</div>
			<div id="modalinfo" class="col-xs-2">
			    $if elem.fields['deny'] == '1' or elem.fields['deny'] == 1 :
				<span class="glyphicon glyphicon-ok-circle"> </span>
			    $else :
				<span class="glyphicon glyphicon-remove-circle"> </span>		    
			</div>
		    </div>
			<div class="row" id="listingMarge" style="margin-top:10px;">
			    <div class="col-xs-3">
				$c.AllMessages.elements['name'].getName(self.lang) :
			    </div>
			</div>
			$for lg in c.AllLanguages.elements.keys():
			    <div class="row">
				<div class="col-xs-3">
				</div>
				<div class="col-xs-2">
				    $lg
				</div>
				<div class="col-xs-7" id="modalinfo" >
				    $elem.getName(lg)
				</div>
			    </div>
		    <div class="row">
			<div class="col-xs-3">
			    $c.AllMessages.elements['group'].getName(self.lang) :
			</div>
		    </div>
		    $code:
			indent = 1
			cindent = 11
			elemgroup = []
			for k,v in elem.groups.items():
			    elemgroup.append(k)
		    $if len(groupList) > 0:
			$for group in groupList:
			    $if group == 'IN' :
				$code:
				    indent+=1
				    cindent-=1
			    $elif group == 'OUT':
				$code:
				    indent-=1
				    cindent+=1
			    $else :
				<div class="row" >
				    <div class="col-xs-$indent">
				    </div>
				    <div id="modalinfo" class="col-xs-$cindent">
					$if type != 'groups':
					    $if group in elemgroup:
						<strong><a href="/permissions/g_$group">$c.AllGroups.elements[group].getName(self.lang)</a></strong>
					    $else:
						<a href="/permissions/g_$group">$c.AllGroups.elements[group].getName(self.lang)</a>
					$else:
					    $if group == elem.fields['g_id']:
						<strong><a href="/permissions/g_$group">$c.AllGroups.elements[group].getName(self.lang)</a></strong>
					    $else:
						<a href="/permissions/g_$group">$c.AllGroups.elements[group].getName(self.lang)</a>
				    </div>
				</div>
		    
		    
		    <div class="row" style="margin-top:10px;">
			<div class="col-xs-4">
			    $c.AllMessages.elements['code'].getName(self.lang) :
			</div>
			<div class="col-xs-8" id="modalinfo" >
			    $c.AllBarcodes.get_barcode(elem.get_type(), elem.id)
			</div>
		    </div>

		    <div class="row" style="margin-top:3px;">
			<div class="col-xs-4">
			    $c.AllMessages.elements['remark'].getName(self.lang) :
			</div>
			<div class="col-xs-8" id="modalinfo" >
			    $elem.fields['remark']
			</div>
		    </div>
		    
		    $if 'colorgraph' in elem.fields :
			<div class="row" style="margin-top:3px;" >
			    <div class="col-xs-4">
				$c.AllMessages.elements['color'].getName(self.lang) 
			    </div>
			    <div class="col-xs-2">
			    </div>
			    <div class="col-xs-4" style="background-color:$elem.fields['colorgraph'];" >$elem.fields['colorgraph']
			    </div>
			    <div class="col-xs-2">
			    </div>
			</div>
		    
		    <div class="row" style="margin-top:3px;">
			<div class="col-xs-4">
			    $c.AllMessages.elements['created'].getName(self.lang) :
			</div>
			<div class="col-xs-8" id="modalinfo" >
			    <strong>$c.AllUsers.elements[elem.creator].getName(self.lang) </strong> - <em>$elem.created</em>
			</div>
		    </div>
		    <div class="row" style="margin-top:3px;">
			<div class="col-xs-4">
			    $c.AllMessages.elements['modified'].getName(self.lang) :
			</div>
			<div class="col-xs-8" id="modalinfo" >
			    <strong>$c.AllUsers.elements[elem.fields['user']].getName(self.lang) </strong> - <em>$elem.fields['begin']</em>
			</div>
		    </div>
		</div>
	    </div>
	    <div class="modal-footer">
		<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
	    </div>
	  </div>
	</div>
    </div>

$code:
    toCheck =[[type,id]]

<div class="row active" style ="margin-top:10px;margin-bottom:10px;background-color:#E5E5E7;padding:15px;" >
    <label class="col-sm-12">$c.AllMessages.elements['equipment'].getName(self.lang) :</label>    

    $for k,equipment in c.AllEquipments.elements.items():
	$if equipment.is_actual_position(toCheck[0][0],id) :
	    $code
		toCheck.append(['e',k])
	    <div class="row active" style="color:#f07e26;">
		<div class="col-xs-1" >
		</div>
		<div class="col-xs-3" >
		</div>
		    
		<div class="col-xs-4" >
		    <a href="/$(equipment.get_name_listing())/" >$equipment.fields['acronym'] - $equipment.getName(self.lang)</a>
		</div>
		<div class="col-xs-4" >
		    $equipment.fields['remark']
		</div>
	    </div>
</div>
<div class="row active" style ="background-color:#E5E5E7;margin-top:10px;margin-bottom:10px;padding:15px;">
    <label class="col-sm-12">$c.AllMessages.elements['container'].getName(self.lang) :</label>    

    $for k,container in c.AllContainers.elements.items():
	$if container.is_actual_position(toCheck[0][0],id) :
	    $code
		toCheck.append(['c',k])
	    <div class="row active" style="color:#f07e26;">
		<div class="col-xs-1" >
		</div>
		<div class="col-xs-3" >
		</div>
		    
		<div class="col-xs-4" >
		    <a href="/$(equipment.get_name_listing())/" >$container.fields['acronym'] - $container.getName(self.lang)</a>
		</div>
		<div class="col-xs-4" >
		    $container.fields['remark']
		</div>
	    </div>
</div>
<div class="row active" style ="background-color:#E5E5E7;margin-top:10px;margin-bottom:10px;padding:15px;">
    <label class="col-sm-12">$c.AllMessages.elements['sensor'].getName(self.lang) :</label>    

    $for k,sensor in c.AllSensors.elements.items():
	$if sensor.fields[type+'_id'] is not '' :
	    $if sensor.fields[type+'_id'] == id :
		<div class="row active" style="color:#f07e26;">
		    <div class="col-xs-1" >
		    </div>
		    <div class="col-xs-3" >
		    </div>
			
		    <div class="col-xs-4" >
			<a href="/$(sensor.get_name_listing())/" >$sensor.fields['acronym'] - $sensor.getName(self.lang)</a>
		    </div>
		    <div class="col-xs-4" >
			$sensor.fields['remark']
		    </div>
		</div>
</div>
<div class="row active"style = "background-color:#E5E5E7;margin-top:10px;margin-bottom:10px;padding:15px;">
    <label class="col-sm-12">$c.AllMessages.elements['batch'].getName(self.lang) :</label>

    $for k,batch in c.AllBatches.elements.items():
	$for t, i in toCheck:
	    $if batch.is_actual_position(t, i) is True:
		<div class="row active" style="color:#f07e26;">
		    <div class="col-xs-1" >
		    </div>
		    <div class="col-xs-3" >
			<a href="/$(c.findAllFromType(t).elements[i].get_name_listing())/" >$c.findAllFromType(t).elements[i].getName(self.lang)</a>
		    </div>
		    <div class="col-xs-4" >
			<a href="/transfers/b_$(k)" >$batch.fields['acronym'] - $batch.getName(self.lang)</a>
		    </div>
		    <div class="col-xs-4" >
			$batch.fields['remark']
		    </div>
		</div>
</div>
