$def with (connected, mail)
$var title : ELSA
$var location : index
$var lang : disconnected
$var recursive : False

$if connected is True:
	$var lang : $c.connectedUsers.users[mail].cuser.fields['language']

	<div>
		$c.getMessage('welcome',self.lang) <em>$c.connectedUsers.users[mail].cuser.getName(self.lang)</em>
	</div>
	$code:
	    allObjects = c.findAllFromType('b')
	    elements = allObjects.get_sorted()
	$for a in elements:
	    $if c.findAllFromType('b').elements[a].fields['active'] == '1' or id == 'all':
		<script>
		    $$(function(){
			$$("#includedMenub_$(a)").load("/fullentry/b_$(a)");
		    });
		</script>
		<div id="includedMenub_$(a)" style="min-height:11ex;"></div>	
	<div class="row active" style="background-color:rgb(0, 21, 43);">
	    <div class="col-xs-5">
	    </div>
	    <div class="col-xs-6" id="addItem">
		<a href="/create/b">$:c.getHalfling('add') $c.getName(c.AllBatches,self.lang)</a>
	    </div>
	</div>    
$else :
    $var title : ELSA login
    <div>
	<p>ELSA stores sensors data and observations made at the different Control Points of your production.</p>
	<h1>Please log-in</h1>
	<p>You must be logged in to use the application</p>

	<form class="form-inline" method="post" action="" id="loginForm" data-bv-message="This value is not valid"  data-bv-live="enabled" data-bv-container="tooltip"data-bv-submitButtons="#loginSubmit">
	    <input type="hidden" name="erroruri" value=""/>
	    <div class="form-group">
		<input type="email" name="_username_" placeholder="Email" class="form-control" size="20" autofocus/>
	    </div>
	    <div class="form-group">
		<input type="password" name="_password_" placeholder="Password" class="form-control" size="8"/>
	    </div>
	    <span class="sr-only">Log in</span>
	    <span class="totip" data-toggle="tooltip" data-placement="bottom" title="log-IN" style="pointer-events: auto;">
		<input type="hidden" name="method" id="method" value="login">
		<button type="submit" name="login" class="btn btn-success" id="loginSubmit">
		    <span class="glyphicon glyphicon-user"></span>
		    <span class="glyphicon glyphicon-log-in"></span>
		</button>
	    </span>
	</form>
	$code:
           result = subprocess.check_output(['ip','-o','addr'])
           result = result.split('\n')
           parsedResult = []
           for line in result:
               parsedResult.append(line.split('scope')[0].split('brd')[0])
           toDisplay = '</br>'.join(x for x in parsedResult)
        <pre>$:toDisplay</pre>
    </div>
