$def with (mail,type, status)
$code :
    all = (type[0] == '*')
    if all:
	type = type[1:]
    if type in 'vtd' :
	type = 'b'	
    allObjects = c.findAll(type)
    keyID = allObjects.keyColumn
    permissionKey = type +'_'
    keys = allObjects.get_sorted_hierarchy()
    total = len(keys)
    if not all:
	keys = keys[:30]
$var location: list/$(type)=$(allObjects.get_class_acronym())
$var recursive : False
$var allowed : $c.connectedUsers.users[mail].cuser.allowed(c)
$var lang : $c.connectedUsers.users[mail].cuser.fields['language']
$var title: $c.getName(allObjects,self.lang)

<div class="row active">
    <label class="col-sm-12">$len(keys)
	$if len(keys) < total:
	    / $total
	$c.getMessage(allObjects.get_class_acronym(),self.lang) :</label>
</div>

$for ikey in keys:
    $ a = allObjects.get(ikey)
    $if a.isActive() or status == 'all':
	$ key = a.get_type()+"_"+a.getID()
	<script>
	    $$(function(){
		$$("#includedMenu$(key)").load("/fullentry/$(key)");
	    });
	</script>
	<div id="includedMenu$(key)" ></div>    

$if not all and (len(keys) < total):
    <div class="row active" style="background-color:rgb(0, 21, 43);">
	<div class="col-xs-11">
	    <a href="/list/*$(type)" class="vcenter"><big>$c.getMessage('all',self.lang) <strong>$total</strong> $c.getMessage(allObjects.get_class_acronym(),self.lang)s</big></a>
	</div>
    </div> 

$if type == 'b' :    
    <div class="row active" style="color:#f07e26;background-color:#E5E5E7;margin-top:10px;margin-bottom:10px;">
	<form  method="post" action="" id="modifyPlace"  enctype="multipart/form-data" data-bv-message="This value is not valid"  data-bv-live="enabled" data-bv-container="tooltip" data-bv-submitButtons="#loginSubmit">
	    <div class="form-group row">
		<label for="inputObject" class="col-sm-2 col-form-label">$c.getMessage('batch',self.lang) </label>
		<div class="col-sm-4">
		    <select name = "batch" class="form-control" id="inputPosition">
		    $for k,b in c.AllBatches.elements.items():
		      $if b.isActive():
			<option value="b_$k">$b.fields['acronym'] - $b.getName(self.lang) </option>
		    </select>
		</div>
		<label for="inputLapse1" class="col-sm-2 col-form-label">$c.getMessage('quantity',self.lang)</label>
		<div class="col-sm-2">
		    <input name="quantity" type="number" min="0" step="1" data-bind="value:replyNumber" class="form-control" id="inputLapse1" placeholder="$c.getMessage('quantity',self.lang)" >
		</div>	    
		<div class="col-sm-2">
		    <button type="submit" class="btn btn-primary btn-block">$c.getMessage('duplicate',self.lang)</button>
		</div> 
	    </div>
	</form>
    </div>

<div class="row active" style="background-color:rgb(0, 21, 43);">
    <div class="col-xs-5">
	<a 
	    $if status == '':
		href="?status=all"
	    $else :
		href="/list/$(type)"
	class="btn btn-default" >$:c.getHalfling('active')&nbsp;/&nbsp;$:c.getHalfling('disabled')</a>
    </div>
    $if (type != 'al') and ( " upd_"+type+" " ) in self.allowed:
      <div class="col-xs-6 vcenter" id="addItem">
	<a href="/create/$(type)" class = "vcenter">$:c.getHalfling('add') $c.getName(allObjects,self.lang)</a>
      </div>
</div>    
